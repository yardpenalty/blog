tinymce.PluginManager.add("autolink",function(n){function i(n){t(n,-1,"(",!0)}function r(n){t(n,0,"",!0)}function u(n){t(n,-1,"",!1)}function t(n,t,i){var r,f,s,u,a,h,e,o,c,l;if(r=n.selection.getRng(!0).cloneRange(),r.startOffset<5){if(o=r.endContainer.previousSibling,!o){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;o=r.endContainer.firstChild.nextSibling}if(c=o.length,r.setStart(o,c),r.setEnd(o,c),r.endOffset<5)return;f=r.endOffset;u=o}else{if(u=r.endContainer,u.nodeType!=3&&u.firstChild){while(u.nodeType!=3&&u.firstChild)u=u.firstChild;u.nodeType==3&&(r.setStart(u,0),r.setEnd(u,u.nodeValue.length))}f=r.endOffset==1?2:r.endOffset-1-t}s=f;do r.setStart(u,f>=2?f-2:0),r.setEnd(u,f>=1?f-1:0),f-=1;while(r.toString()!=" "&&r.toString()!==""&&r.toString().charCodeAt(0)!=160&&f-2>=0&&r.toString()!=i);r.toString()==i||r.toString().charCodeAt(0)==160?(r.setStart(u,f),r.setEnd(u,s),f+=1):r.startOffset===0?(r.setStart(u,0),r.setEnd(u,s)):(r.setStart(u,f),r.setEnd(u,s));h=r.toString();h.charAt(h.length-1)=="."&&r.setEnd(u,s-1);h=r.toString();e=h.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i);e&&(e[1]=="www."?e[1]="http://www.":/@$/.test(e[1])&&!/^mailto:/.test(e[1])&&(e[1]="mailto:"+e[1]),a=n.selection.getBookmark(),n.selection.setRng(r),n.execCommand("createlink",!1,e[1]+e[2]),n.selection.moveToBookmark(a),n.nodeChanged(),tinymce.Env.webkit&&(n.selection.collapse(!1),l=Math.min(u.length,s+1),r.setStart(u,l),r.setEnd(u,l),n.selection.setRng(r)))}n.on("keydown",function(t){if(t.keyCode==13)return u(n)});if(!tinymce.Env.ie){n.on("keypress",function(t){if(t.which==41)return i(n)});n.on("keyup",function(t){if(t.keyCode==32)return r(n)})}});
/*
//# sourceMappingURL=plugin.min.js.map
*/