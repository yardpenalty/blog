tinymce.PluginManager.add("lists",function(n){function t(n){return n&&/^(OL|UL)$/.test(n.nodeName)}function r(n){return n.parentNode.firstChild==n}function f(n){return n.parentNode.lastChild==n}function u(t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]}function e(n){return n&&n.nodeName==="SPAN"&&n.getAttribute("data-mce-type")==="bookmark"}var i=this;n.on("init",function(){function c(n){function i(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];r.nodeType==1&&(f=o.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):o.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u}var t={};return i(!0),n.collapsed||i(),t}function l(n){function i(t){function f(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t==n)return i;(t.nodeType!=1||t.getAttribute("data-mce-type")!="bookmark")&&i++;t=t.nextSibling}return-1}var i,r,u;(i=u=n[t?"startContainer":"endContainer"],r=n[t?"startOffset":"endOffset"],i)&&(i.nodeType==1&&(r=f(i),i=i.parentNode,o.remove(u)),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=o.createRng();t.setStart(n.startContainer,n.startOffset);n.endContainer&&t.setEnd(n.endContainer,n.endOffset);s.setRng(t)}function h(t,i){var u,r,f=o.createFragment(),e,h=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(r=o.create(i),r.tagName===n.settings.forced_root_block&&o.setAttribs(r,n.settings.forced_root_block_attrs),f.appendChild(r)),t)while(u=t.firstChild)s=u.nodeName,e||s=="SPAN"&&u.getAttribute("data-mce-type")=="bookmark"||(e=!0),h[s]?(f.appendChild(u),r=null):i?(r||(r=o.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?!e&&(!tinymce.Env.ie||tinymce.Env.ie>10)&&r.appendChild(o.create("br",{"data-mce-bogus":"1"})):f.appendChild(o.create("br")),f}function a(){return tinymce.grep(s.getSelectedBlocks(),function(n){return n.nodeName=="LI"})}function v(n,t,i){var r,u,f=o.select('span[data-mce-type="bookmark"]',n);i=i||h(t);r=o.createRng();r.setStartAfter(t);r.setEndAfter(n);u=r.extractContents();o.isEmpty(u)||o.insertAfter(u,n);o.insertAfter(i,n);o.isEmpty(t.parentNode)&&(tinymce.each(f,function(n){t.parentNode.parentNode.insertBefore(n,t.parentNode)}),o.remove(t.parentNode));o.remove(t)}function y(n){var i,r;if(i=n.nextSibling,i&&t(i)&&i.nodeName==n.nodeName){while(r=i.firstChild)n.appendChild(r);o.remove(i)}if(i=n.previousSibling,i&&t(i)&&i.nodeName==n.nodeName){while(r=i.firstChild)n.insertBefore(r,n.firstChild);o.remove(i)}}function g(n){tinymce.each(tinymce.grep(o.select("ol,ul",n)),function(n){var i,r=n.parentNode;r.nodeName=="LI"&&r.firstChild==n&&(i=r.previousSibling,i&&i.nodeName=="LI"&&(i.appendChild(n),o.isEmpty(r)&&o.remove(r)));t(r)&&(i=r.previousSibling,i&&i.nodeName=="LI"&&i.appendChild(n))})}function p(n){function s(n){o.isEmpty(n)&&o.remove(n)}var u=n.parentNode,i=u.parentNode,e;return r(n)&&f(n)?(i.nodeName=="LI"?(o.insertAfter(n,i),s(i),o.remove(u)):t(i)?o.remove(u,!0):(i.insertBefore(h(n),u),o.remove(u)),!0):r(n)?(i.nodeName=="LI"?(o.insertAfter(n,i),n.appendChild(u),s(i)):t(i)?i.insertBefore(n,u):(i.insertBefore(h(n),u),o.remove(n)),!0):f(n)?(i.nodeName=="LI"?o.insertAfter(n,i):t(i)?o.insertAfter(n,u):(o.insertAfter(h(n),u),o.remove(n)),!0):(i.nodeName=="LI"?(u=i,e=h(n,"LI")):e=t(i)?h(n,"LI"):h(n),v(u,n,e),g(u.parentNode),!0)}function nt(n){function u(i,r){var u;if(t(i)){while(u=n.lastChild.firstChild)r.appendChild(u);o.remove(i)}}var i,r;return(i=n.previousSibling,i&&t(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&t(i.lastChild)?(i.lastChild.appendChild(n),u(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&t(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=o.create(n.parentNode.nodeName),i.appendChild(r),r.appendChild(n),u(n.lastChild,r),!0):!1}function w(){var i=a(),r,t;if(i.length){for(r=c(s.getRng(!0)),t=0;t<i.length;t++)if(!nt(i[t])&&t===0)break;return l(r),n.nodeChanged(),!0}}function b(){var i=a(),f,t,u,e,r;if(i.length){for(f=c(s.getRng(!0)),e=n.getBody(),t=i.length;t--;)for(r=i[t].parentNode;r&&r!=e;){for(u=i.length;u--;)if(i[u]===r){i.splice(t,1);break}r=r.parentNode}for(t=0;t<i.length;t++)if(!p(i[t])&&t===0)break;return l(f),n.nodeChanged(),!0}}function tt(i){function h(){function h(n){var t,i;for(t=r[n?"startContainer":"endContainer"],i=r[n?"startOffset":"endOffset"],t.nodeType==1&&(t=t.childNodes[Math.min(i,t.childNodes.length-1)]||t);t.parentNode!=s;){if(u(t)||/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var f=[],s=n.getBody(),l=h(!0),a=h(),t,c=[],i=l;i;i=i.nextSibling)if(c.push(i),i==a)break;return tinymce.each(c,function(n){if(u(n)){f.push(n);t=null;return}if(o.isBlock(n)||n.nodeName=="BR"){n.nodeName=="BR"&&o.remove(n);t=null;return}var i=n.nextSibling;if(e(n)&&(u(i)||!i&&n.parentNode==s)){t=null;return}t||(t=o.create("p"),n.parentNode.insertBefore(t,n),f.push(t));t.appendChild(n)}),f}var r=s.getRng(!0),f=c(r),a=h();tinymce.each(a,function(n){var u,r;r=n.previousSibling;r&&t(r)&&r.nodeName==i?(u=r,n=o.rename(n,"LI"),r.appendChild(n)):(u=o.create(i),n.parentNode.insertBefore(u,n),u.appendChild(n),n=o.rename(n,"LI"));y(u)});l(f)}function k(){var i=c(s.getRng(!0)),r=n.getBody();tinymce.each(a(),function(n){var i,u;if(o.isEmpty(n)){p(n);return}for(i=n;i&&i!=r;i=i.parentNode)t(i)&&(u=i);v(u,n)});l(i)}function d(n){var t=o.getParent(s.getStart(),"OL,UL"),i;t?t.nodeName==n?k(n):(i=c(s.getRng(!0)),y(o.rename(t,n)),l(i)):tt(n)}var o=n.dom,s=n.selection;i.backspaceDelete=function(n){function h(n,t){var i=n.startContainer,r=n.startOffset,u;if(i.nodeType==3&&(t?r<i.data.length:r>0))return i;for(u=new tinymce.dom.TreeWalker(n.startContainer);i=u[t?"next":"prev"]();)if(i.nodeType==3&&i.data.length>0)return i}function f(n,i){var r,u,f=n.parentNode;for(t(i.lastChild)&&(u=i.lastChild),r=i.lastChild,r&&r.nodeName=="BR"&&n.hasChildNodes()&&o.remove(r);r=n.firstChild;)i.appendChild(r);u&&i.appendChild(u);o.remove(n);o.isEmpty(f)&&o.remove(f)}var i,u,r,e;if(s.isCollapsed()&&(i=o.getParent(s.getStart(),"LI"),i)){if(u=s.getRng(!0),r=o.getParent(h(u,n),"LI"),r&&r!=i)return e=c(u),n?f(r,i):f(i,r),l(e),!0;if(!r&&!n&&k(i.parentNode.nodeName))return!0}};n.addCommand("Indent",function(){if(!w())return!0});n.addCommand("Outdent",function(){if(!b())return!0});n.addCommand("InsertUnorderedList",function(){d("UL")});n.addCommand("InsertOrderedList",function(){d("OL")});n.on("keydown",function(t){t.keyCode==9&&n.dom.getParent(n.selection.getStart(),"LI")&&(t.preventDefault(),t.shiftKey?b():w())})});n.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;n.on("nodechange",function(){var i=n.dom.getParent(n.selection.getNode(),"LI,UL,OL");t.disabled(i&&(i.nodeName!="LI"||r(i)))})}});n.on("keydown",function(n){n.keyCode==tinymce.util.VK.BACKSPACE?i.backspaceDelete()&&n.preventDefault():n.keyCode==tinymce.util.VK.DELETE&&i.backspaceDelete(!0)&&n.preventDefault()})});
/*
//# sourceMappingURL=plugin.min.js.map
*/