tinymce.PluginManager.add("noneditable",function(n){function s(){function e(n){var t;return n.nodeType===1&&((t=n.getAttribute(r),t&&t!=="inherit")||(t=n.contentEditable,t!=="inherit"))?t:null}function o(n){for(var t;n;){if(t=e(n),t)return t==="false"?n:null;n=n.parentNode}}function c(n){while(n){if(n.id===s)return n;n=n.parentNode}}function v(n){var t;if(n)for(t=new f(n,n),n=t.current();n;n=t.next())if(n.nodeType===3)return n}function y(t,r){var f,o;if(e(t)==="false"&&u.isBlock(t)){i.select(t);return}return o=u.createRng(),e(t)==="true"&&(t.firstChild||t.appendChild(n.getDoc().createTextNode(" ")),t=t.firstChild,r=!0),f=u.create("span",{id:s,"data-mce-bogus":!0},h),r?t.parentNode.insertBefore(f,t):u.insertAfter(f,t),o.setStart(f.firstChild,1),o.collapse(!0),i.setRng(o),f}function l(n){var r,t,f,e;if(n)r=i.getRng(!0),r.setStartBefore(n),r.setEndBefore(n),t=v(n),t&&t.nodeValue.charAt(0)==h&&(t=t.deleteData(0,1)),u.remove(n,!0),i.setRng(r);else for(f=c(i.getStart());(n=u.get(s))&&n!==e;)f!==n&&(t=v(n),t&&t.nodeValue.charAt(0)==h&&(t=t.deleteData(0,1)),u.remove(n,!0)),e=n}function a(){function h(n,i){var r,u,h,o,s,c;if(r=t.startContainer,u=t.startOffset,r.nodeType==3){if(s=r.nodeValue.length,u>0&&u<s||(i?u==s:u===0))return}else if(u<r.childNodes.length)c=!i&&u>0?u-1:u,r=r.childNodes[c],r.hasChildNodes()&&(r=r.firstChild);else return i?null:n;for(h=new f(r,n);o=h[i?"prev":"next"]();){if(o.nodeType===3&&o.nodeValue.length>0)return;if(e(o)==="true")return o}return n}var n,r,s,t,u;l();s=i.isCollapsed();n=o(i.getStart());r=o(i.getEnd());(n||r)&&(t=i.getRng(!0),s?(n=n||r,(u=h(n,!0))?y(u,!0):(u=h(n,!1))?y(u,!1):i.select(n)):(t=i.getRng(!0),n&&t.setStartBefore(n),r&&t.setEndAfter(r),i.setRng(t)))}function p(r){function k(n,t){while(n=n[t?"previousSibling":"nextSibling"])if(n.nodeType!==3||n.nodeValue.length>0)return n}function p(n,t){i.select(n);i.collapse(t)}function nt(t){function l(n){for(var t=r;t;){if(t===n)return;t=t.parentNode}u.remove(n);a()}function v(){for(var i,f=n.schema.getNonEmptyElements(),u=new tinymce.dom.TreeWalker(r,n.getBody());i=t?u.prev():u.next();){if(f[i.nodeName.toLowerCase()])break;if(i.nodeType===3&&tinymce.trim(i.nodeValue).length>0)break;if(e(i)==="false")return l(i),!0}return o(i)?!0:!1}var s,r,f,h;if(i.isCollapsed()){if(s=i.getRng(!0),r=s.startContainer,f=s.startOffset,r=c(r)||r,h=o(r))return l(h),!1;if(r.nodeType==3&&(t?f>0:f<r.nodeValue.length))return!0;if(r.nodeType==1&&(r=r.childNodes[f]||r),v())return!1}return!0}var s=r.keyCode,h,v,w,b,y;if(w=i.getStart(),b=i.getEnd(),h=o(w)||o(b),h&&(s<112||s>124)&&s!=t.DELETE&&s!=t.BACKSPACE){if((tinymce.isMac?r.metaKey:r.ctrlKey)&&(s==67||s==88||s==86))return;if(r.preventDefault(),s==t.LEFT||s==t.RIGHT)if(y=s==t.LEFT,n.dom.isBlock(h)){var d=y?h.previousSibling:h.nextSibling,g=new f(d,d),tt=y?g.prev():g.next();p(tt,!y)}else p(h,y)}else if(s==t.LEFT||s==t.RIGHT||s==t.BACKSPACE||s==t.DELETE){if(v=c(w),v){if(s==t.LEFT||s==t.BACKSPACE)if(h=k(v,!0),h&&e(h)==="false")if(r.preventDefault(),s==t.LEFT)p(h,!0);else{u.remove(h);return}else l(v);if(s==t.RIGHT||s==t.DELETE)if(h=k(v),h&&e(h)==="false")if(r.preventDefault(),s==t.RIGHT)p(h,!1);else{u.remove(h);return}else l(v)}if((s==t.BACKSPACE||s==t.DELETE)&&!nt(s==t.BACKSPACE))return r.preventDefault(),!1}}var u=n.dom,i=n.selection,s="mce_noneditablecaret",h="﻿";n.on("mousedown",function(t){var i=n.selection.getNode();e(i)==="false"&&i==t.target&&a()});n.on("mouseup keyup",a);n.on("keydown",p)}function h(t){var u=i.length,r=t.content,f=tinymce.trim(e);if(t.format!="raw"){while(u--)r=r.replace(i[u],function(t){var i=arguments,u=i[i.length-2];return u>0&&r.charAt(u-1)=='"'?t:'<span class="'+f+'" data-mce-content="'+n.dom.encode(i[0])+'">'+n.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"<\/span>"});t.content=r}}var f=tinymce.dom.TreeWalker,u="contenteditable",r="data-mce-"+u,t=tinymce.util.VK,o,e,i;o=" "+tinymce.trim(n.getParam("noneditable_editable_class","mceEditable"))+" ";e=" "+tinymce.trim(n.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";i=n.getParam("noneditable_regexp");i&&!i.length&&(i=[i]);n.on("PreInit",function(){if(s(),i)n.on("BeforeSetContent",h);n.parser.addAttributeFilter("class",function(n){for(var u=n.length,i,t;u--;)t=n[u],i=" "+t.attr("class")+" ",i.indexOf(o)!==-1?t.attr(r,"true"):i.indexOf(e)!==-1&&t.attr(r,"false")});n.serializer.addAttributeFilter(r,function(n){for(var f=n.length,t;f--;)t=n[f],i&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(u,null),t.attr(r,null))});n.parser.addAttributeFilter(u,function(n){for(var i=n.length,t;i--;)t=n[i],t.attr(r,t.attr(u)),t.attr(u,null)})})});
/*
//# sourceMappingURL=plugin.min.js.map
*/