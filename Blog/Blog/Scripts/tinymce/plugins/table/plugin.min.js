(function(n,t){"use strict";function u(n,t){for(var u,e=[],r=0;r<n.length;++r){if(u=i[n[r]]||f(n[r]),!u)throw"module definition dependecy not found: "+n[r];e.push(u)}t.apply(null,e)}function r(n,r,f){if(typeof n!="string")throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(r,function(){i[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}function e(r){for(var f,o=0;o<r.length;o++){var e=n,s=r[o],u=s.split(/[.\/]/);for(f=0;f<u.length-1;++f)e[u[f]]===t&&(e[u[f]]={}),e=e[u[f]];e[u[u.length-1]]=i[s]}}var i={};r("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(n,t){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var i=n.each;return function(u,f){function nt(){var n=0;e=[];i(["thead","tbody","tfoot"],function(t){var u=o.select("> "+t+" tr",f);i(u,function(u,f){f+=n;i(o.select("> td, > th",u),function(n,i){var o,u,s,h;if(e[f])while(e[f][i])i++;for(s=r(n,"rowspan"),h=r(n,"colspan"),u=f;u<f+s;u++)for(e[u]||(e[u]=[]),o=i;o<i+h;o++)e[u][o]={part:t,real:u==f&&o==i,elm:n,rowspan:s,colspan:h}})});n+=u.length})}function w(n,t){return n=n.cloneNode(t),n.removeAttribute("id"),n}function b(n,t){var i;return i=e[t],i?i[n]:void 0}function h(n,t,i){n&&(i=parseInt(i,10),i===1?n.removeAttribute(t,1):n.setAttribute(t,i,1))}function p(n){return n&&(o.hasClass(n.elm,"mce-item-selected")||n==y)}function k(){var n=[];return i(f.rows,function(t){i(t.cells,function(i){if(o.hasClass(i,"mce-item-selected")||i==y.elm)return n.push(t),!1})}),n}function it(){var n=o.createRng();n.setStartAfter(f);n.setEndAfter(f);l.setRng(n);o.remove(f)}function a(r){var f,e={};return u.settings.table_clone_elements!==!1&&(e=n.makeMap((u.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),n.walk(r,function(n){var u;if(n.nodeType==3)return i(o.getParents(n.parentNode,null,r).reverse(),function(n){e[n.nodeName]&&(n=w(n,!1),f?u&&u.appendChild(n):f=u=n,u=n)}),u&&(u.innerHTML=t.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),r=w(r,!1),h(r,"rowSpan",1),h(r,"colSpan",1),f?r.appendChild(f):t.ie||(r.innerHTML='<br data-mce-bogus="1" />'),r}function d(){var t=o.createRng(),n;if(i(o.select("tr",f),function(n){n.cells.length===0&&o.remove(n)}),o.select("tr",f).length===0){t.setStartBefore(f);t.setEndBefore(f);l.setRng(t);o.remove(f);return}i(o.select("thead,tbody,tfoot",f),function(n){n.rows.length===0&&o.remove(n)});nt();n=e[Math.min(e.length-1,s.y)];n&&(l.select(n[Math.min(n.length-1,s.x)].elm,!0),l.collapse(!0))}function g(n,t,i,r){for(var s,f,c,u=e[t][n].elm.parentNode,h=1;h<=i;h++)if(u=o.getNext(u,"tr"),u){for(s=n;s>=0;s--)if(c=e[t+h][s].elm,c.parentNode==u){for(f=1;f<=r;f++)o.insertAfter(a(c),c);break}if(s==-1)for(f=1;f<=r;f++)u.insertBefore(a(u.cells[0]),u.cells[0])}}function tt(){i(e,function(n,t){i(n,function(n,i){var u,f,e;if(p(n)&&(n=n.elm,u=r(n,"colspan"),f=r(n,"rowspan"),u>1||f>1)){for(h(n,"rowSpan",1),h(n,"colSpan",1),e=0;e<u-1;e++)o.insertAfter(a(n),n);g(i,t,f-1,u)}})})}function rt(t,r,u){var rt,l,a,k,g,it,y,f,ut,w,ft;if(t?(rt=v(t),l=rt.x,a=rt.y,k=l+(r-1),g=a+(u-1)):(s=c=null,i(e,function(n,t){i(n,function(n,i){p(n)&&(s||(s={x:i,y:t}),c={x:i,y:t})})}),l=s.x,a=s.y,k=c.x,g=c.y),f=b(l,a),ut=b(k,g),f&&ut&&f.part==ut.part){for(tt(),nt(),f=b(l,a).elm,h(f,"colSpan",k-l+1),h(f,"rowSpan",g-a+1),y=a;y<=g;y++)for(it=l;it<=k;it++)e[y]&&e[y][it]&&(t=e[y][it].elm,t!=f&&(w=n.grep(t.childNodes),i(w,function(n){f.appendChild(n)}),w.length&&(w=n.grep(f.childNodes),ft=0,i(w,function(n){n.nodeName=="BR"&&o.getAttrib(n,"data-mce-bogus")&&ft++<w.length-1&&f.removeChild(n)})),o.remove(t)));d()}}function ut(n){var t,u,b,f,c,l,v,y,s;for(i(e,function(r,u){return i(r,function(i){if(p(i)&&(i=i.elm,c=i.parentNode,l=w(c,!1),t=u,n))return!1}),n?!t:void 0}),f=0;f<e[0].length;f++)if(e[t][f]&&(u=e[t][f].elm,u!=b)){if(n){if(t>0&&e[t-1][f]&&(y=e[t-1][f].elm,s=r(y,"rowSpan"),s>1)){h(y,"rowSpan",s+1);continue}}else if(s=r(u,"rowspan"),s>1){h(u,"rowSpan",s+1);continue}v=a(u);h(v,"colSpan",u.colSpan);l.appendChild(v);b=u}l.hasChildNodes()&&(n?c.parentNode.insertBefore(l,c):o.insertAfter(l,c))}function ft(n){var t,u;i(e,function(r){return i(r,function(i,r){if(p(i)&&(t=r,n))return!1}),n?!t:void 0});i(e,function(i,f){var e,c,s;i[t]&&(e=i[t].elm,e!=u&&(s=r(e,"colspan"),c=r(e,"rowspan"),s==1?n?(e.parentNode.insertBefore(a(e),e),g(t,f,c-1,s)):(o.insertAfter(a(e),e),g(t,f,c-1,s)):h(e,"colSpan",e.colSpan+1),u=e))})}function et(){var t=[];i(e,function(u){i(u,function(u,f){p(u)&&n.inArray(t,f)===-1&&(i(e,function(n){var t=n[f].elm,i;i=r(t,"colSpan");i>1?h(t,"colSpan",i-1):o.remove(t)}),t.push(f))})});d()}function ot(){function t(n){var f,t,u;f=o.getNext(n,"tr");i(n.cells,function(n){var i=r(n,"rowSpan");i>1&&(h(n,"rowSpan",i-1),t=v(n),g(t.x,t.y,1,1))});t=v(n.cells[0]);i(e[t.y],function(n){var t;n=n.elm;n!=u&&(t=r(n,"rowSpan"),t<=1?o.remove(n):h(n,"rowSpan",t-1),u=n)})}var n;n=k();i(n.reverse(),function(n){t(n)});d()}function st(){var n=k();return o.remove(n),d(),n}function ht(){var n=k();return i(n,function(t,i){n[i]=w(t,!0)}),n}function ct(n,t){var f=k(),r=f[t?0:f.length-1],u=r.cells.length;n&&(i(e,function(n){var t;return u=0,i(n,function(n){n.real&&(u+=n.colspan);n.elm.parentNode==r&&(t=1)}),t?!1:void 0}),t||n.reverse(),i(n,function(n){for(var f=n.cells.length,e,i=0;i<f;i++)e=n.cells[i],h(e,"colSpan",1),h(e,"rowSpan",1);for(i=f;i<u;i++)n.appendChild(a(n.cells[f-1]));for(i=u;i<f;i++)o.remove(n.cells[i]);t?r.parentNode.insertBefore(n,r):o.insertAfter(n,r)}),o.removeClass(o.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function v(n){var t;return i(e,function(r,u){return i(r,function(i,r){if(i.elm==n)return t={x:r,y:u},!1}),!t}),t}function lt(n){s=v(n)}function at(){var n,t;return n=t=0,i(e,function(r,u){i(r,function(i,r){var f,o;p(i)&&(i=e[u][r],r>n&&(n=r),u>t&&(t=u),i.real&&(f=i.colspan-1,o=i.rowspan-1,f&&r+f>n&&(n=r+f),o&&u+o>t&&(t=u+o)))})}),{x:n,y:t}}function vt(n){var r,u,y,p,f,h,l,a,t,i;if(c=v(n),s&&c){for(r=Math.min(s.x,c.x),u=Math.min(s.y,c.y),y=Math.max(s.x,c.x),p=Math.max(s.y,c.y),f=y,h=p,i=u;i<=h;i++)n=e[i][r],n.real||r-(n.colspan-1)<r&&(r-=n.colspan-1);for(t=r;t<=f;t++)n=e[u][t],n.real||u-(n.rowspan-1)<u&&(u-=n.rowspan-1);for(i=u;i<=p;i++)for(t=r;t<=y;t++)n=e[i][t],n.real&&(l=n.colspan-1,a=n.rowspan-1,l&&t+l>f&&(f=t+l),a&&i+a>h&&(h=i+a));for(o.removeClass(o.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=u;i<=h;i++)for(t=r;t<=f;t++)e[i][t]&&o.addClass(e[i][t].elm,"mce-item-selected")}}var e,s,c,y,l=u.selection,o=l.dom;f=f||o.getParent(l.getStart(),"table");nt();y=o.getParent(l.getStart(),"th,td");y&&(s=v(y),c=at(),y=b(s.x,s.y));n.extend(this,{deleteTable:it,split:tt,merge:rt,insertRow:ut,insertCol:ft,deleteCols:et,deleteRows:ot,cutRows:st,copyRows:ht,pasteRows:ct,getPos:v,setStartCell:lt,setEndCell:vt})}});r("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(n,t,i){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var u=i.each;return function(i){function o(){function t(t){function h(n,r){var e=n?"previousSibling":"nextSibling",u=i.dom.getParent(r,"tr"),o=u[e],f;if(o)return c(i,r,o,n),t.preventDefault(),!0;var s=i.dom.getParent(u,"table"),h=u.parentNode,a=h.nodeName.toLowerCase();return(a==="tbody"||a===(n?"tfoot":"thead"))&&(f=l(n,s,h,"tbody"),f!==null)?v(n,f,r):y(n,u,e,s)}function l(n,t,r,u){var f=i.dom.select(">"+u,t),e=f.indexOf(r),o;return n&&e===0||!n&&e===f.length-1?a(n,t):e===-1?(o=r.tagName.toLowerCase()==="thead"?0:f.length-1,f[o]):f[e+(n?-1:1)]}function a(n,t){var u=n?"thead":"tfoot",r=i.dom.select(">"+u,t);return r.length!==0?r[0]:null}function v(n,r,u){var f=e(r,n);return f&&c(i,u,f,n),t.preventDefault(),!0}function y(n,r,u,f){var c=f[u],s,l;return c?(o(c),!0):(s=i.dom.getParent(f,"td,th"),s?h(n,s,t):(l=e(r,!n),o(l),t.preventDefault(),!1))}function e(n,t){var r=n&&n[t?"lastChild":"firstChild"];return r&&r.nodeName==="BR"?i.dom.getParent(r,"td,th"):r}function o(n){i.selection.setCursorLocation(n,0)}function p(){return f==n.UP||f==n.DOWN}function w(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"tr");return i!==null}function b(n){for(var i=0,t=n;t.previousSibling;)t=t.previousSibling,i=i+r(t,"colspan");return i}function k(n,t){var i=0,f=0;return u(n.children,function(n,u){return i=i+r(n,"colspan"),f=u,i>t?!1:void 0}),f}function c(n,t,r,u){var s=b(i.dom.getParent(t,"td,th")),h=k(r,s),f=r.childNodes[h],c=e(f,u);o(c||f)}function d(n){var u=i.selection.getNode(),t=i.dom.getParent(u,"td,th"),r=i.dom.getParent(n,"td,th");return t&&t!==r&&g(t,r)}function g(n,t){return i.dom.getParent(n,"TABLE")===i.dom.getParent(t,"TABLE")}var f=t.keyCode,s;p()&&w(i)&&(s=i.selection.getNode(),setTimeout(function(){d(s)&&h(!t.shiftKey&&f===n.UP,s,t)},0))}i.on("KeyDown",function(n){t(n)})}function f(){function n(n,t){var u=t.ownerDocument,i=u.createRange(),r;return i.setStartBefore(t),i.setEnd(n.endContainer,n.endOffset),r=u.createElement("body"),r.appendChild(i.cloneContents()),r.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}i.on("KeyDown",function(t){var r,u,f=i.dom;(t.keyCode==37||t.keyCode==38)&&(r=i.selection.getRng(),u=f.getParent(r.startContainer,"table"),u&&i.getBody().firstChild==u&&n(r,u)&&(r=f.createRng(),r.setStartBefore(u),r.setEndBefore(u),i.selection.setRng(r),t.preventDefault()))})}function e(){i.on("KeyDown SetContent VisualAid",function(){for(var n=i.getBody().lastChild;n;n=n.previousSibling)if(n.nodeType==3){if(n.nodeValue.length>0)break}else if(n.nodeType==1&&!n.getAttribute("data-mce-bogus"))break;n&&n.nodeName=="TABLE"&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))});i.on("PreProcess",function(n){var t=n.node.lastChild;t&&(t.nodeName=="BR"||t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue==" "))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"&&i.dom.remove(t)})}function s(){function t(n,t,i,r){var u=n.dom.getParent(t.startContainer,"TABLE"),f,e,o;return u&&(f=u.parentNode),e=t.startContainer.nodeType==3&&t.startOffset===0&&t.endOffset===0&&r&&(i.nodeName=="TR"||i==f),o=(i.nodeName=="TD"||i.nodeName=="TH")&&!r,e||o}function n(){var r=i.selection.getRng(),f=i.selection.getNode(),u=i.dom.getParent(r.startContainer,"TD,TH"),n;if(t(i,r,f,u)){for(u||(u=f),n=u.lastChild;n.lastChild;)n=n.lastChild;r.setEnd(n,n.nodeValue.length);i.selection.setRng(r)}}i.on("KeyDown",function(){n()});i.on("MouseDown",function(t){t.button!=2&&n()})}t.webkit&&(o(),s());t.gecko&&(f(),e());t.ie>10&&(f(),e())}});r("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(n,t,i){return function(r){function h(){r.getBody().style.webkitUserSelect="";s&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),s=!1)}function c(t){var h,c,i=t.target;if(e&&(f||i!=e)&&(i.nodeName=="TD"||i.nodeName=="TH")){c=u.getParent(i,"table");c==o&&(f||(f=new n(r,c),f.setStartCell(e),r.getBody().style.webkitUserSelect="none"),f.setEndCell(i),s=!0);h=r.selection.getSel();try{h.removeAllRanges?h.removeAllRanges():h.empty()}catch(l){}t.preventDefault()}}var u=r.dom,f,e,o,s=!0;r.on("MouseDown",function(n){n.button!=2&&(h(),e=u.getParent(n.target,"td,th"),o=u.getParent(e,"table"))});u.bind(r.getDoc(),"mouseover",c);r.on("remove",function(){u.unbind(r.getDoc(),"mouseover",c)});r.on("MouseUp",function(){function a(n,r){var u=new t(n,n);do{if(n.nodeType==3&&i.trim(n.nodeValue).length!==0){r?s.setStart(n,0):s.setEnd(n,n.nodeValue.length);return}if(n.nodeName=="BR"){r?s.setStartBefore(n):s.setEndBefore(n);return}}while(n=r?u.next():u.prev())}var s,v=r.selection,h,c,n,l,y;if(e){if(f&&(r.getBody().style.webkitUserSelect=""),h=u.select("td.mce-item-selected,th.mce-item-selected"),h.length>0){s=u.createRng();n=h[0];y=h[h.length-1];s.setStartBefore(n);s.setEndAfter(n);a(n,1);c=new t(n,u.getParent(h[0],"table"));do if(n.nodeName=="TD"||n.nodeName=="TH"){if(!u.hasClass(n,"mce-item-selected"))break;l=n}while(n=c.next());a(l);v.setRng(s)}r.nodeChanged();e=f=o=null}});r.on("KeyUp",function(){h()});return{clear:h}}});r("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(n,t,i,r,u,f,e){function s(r){function s(n){return n?n.replace(/px$/,""):""}function h(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function v(n){o("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},n)})}function y(){var t=r.dom,n,i,u;n=r.dom.getParent(r.selection.getStart(),"table");u=!1;i={width:s(t.getStyle(n,"width")||t.getAttrib(n,"width")),height:s(t.getStyle(n,"height")||t.getAttrib(n,"height")),cellspacing:t.getAttrib(n,"cellspacing"),cellpadding:t.getAttrib(n,"cellpadding"),border:t.getAttrib(n,"border"),caption:!!t.select("caption",n)[0]};o("left center right".split(" "),function(t){r.formatter.matchNode(n,"align"+t)&&(i.align=t)});r.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:i,defaults:{type:"textbox",maxWidth:50},items:[u?{label:"Cols",name:"cols",disabled:!0}:null,u?{label:"Rows",name:"rows",disabled:!0}:null,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var i=this.toJSON(),u;r.undoManager.transact(function(){r.dom.setAttribs(n,{cellspacing:i.cellspacing,cellpadding:i.cellpadding,border:i.border});r.dom.setStyles(n,{width:h(i.width),height:h(i.height)});u=t.select("caption",n)[0];u&&!i.caption&&t.remove(u);!u&&i.caption&&(u=t.create("caption"),f.ie||(u.innerHTML='<br data-mce-bogus="1"/>'),n.insertBefore(u,n.firstChild));v(n);i.align&&r.formatter.apply("align"+i.align,{},n);r.focus();r.addVisual()})}})}function k(n,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var i=this.toJSON();r.undoManager.transact(function(){n.merge(t,i.cols,i.rows)})}})}function d(){var t=r.dom,n,u,i=[];i=r.dom.select("td.mce-item-selected,th.mce-item-selected");n=r.dom.getParent(r.selection.getStart(),"td,th");!i.length&&n&&i.push(n);n=n||i[0];u={width:s(t.getStyle(n,"width")||t.getAttrib(n,"width")),height:s(t.getStyle(n,"height")||t.getAttrib(n,"height")),scope:t.getAttrib(n,"scope")};u.type=n.nodeName.toLowerCase();o("left center right".split(" "),function(t){r.formatter.matchNode(n,"align"+t)&&(u.align=t)});r.windowManager.open({title:"Cell properties",items:{type:"form",data:u,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){o(i,function(i){r.dom.setAttrib(i,"scope",n.scope);r.dom.setStyles(i,{width:h(n.width),height:h(n.height)});n.type&&i.nodeName.toLowerCase()!=n.type&&(i=t.rename(i,n.type));v(i);n.align&&r.formatter.apply("align"+n.align,{},i)});r.focus()})}})}function g(){var n=r.dom,f,e,t,i,u=[];f=r.dom.getParent(r.selection.getStart(),"table");e=r.dom.getParent(r.selection.getStart(),"td,th");o(f.rows,function(t){o(t.cells,function(i){if(n.hasClass(i,"mce-item-selected")||i==e)return u.push(t),!1})});t=u[0];i={height:s(n.getStyle(t,"height")||n.getAttrib(t,"height")),scope:n.getAttrib(t,"scope")};i.type=t.parentNode.nodeName.toLowerCase();o("left center right".split(" "),function(n){r.formatter.matchNode(t,"align"+n)&&(i.align=n)});r.windowManager.open({title:"Row properties",items:{type:"form",data:i,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,menu:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,menu:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var f=this.toJSON(),t,e,i;r.undoManager.transact(function(){var s=f.type;o(u,function(u){r.dom.setAttrib(u,"scope",f.scope);r.dom.setStyles(u,{height:h(f.height)});s!=u.parentNode.nodeName.toLowerCase()&&(t=n.getParent(u,"table"),e=u.parentNode,i=n.select(s,t)[0],i||(i=n.create(s),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)),i.appendChild(u),e.hasChildNodes()||n.remove(e));v(u);f.align&&r.formatter.apply("align"+f.align,{},u)});r.focus()})}})}function u(n){return function(){r.execCommand(n)}}function nt(n,t){for(var e,i="<table><tbody>",u=0;u<t;u++){for(i+="<tr>",e=0;e<n;e++)i+="<td>"+(f.ie?" ":"<br>")+"<\/td>";i+="<\/tr>"}i+="<\/tbody><\/table>";r.insertContent(i)}function p(n,t){function i(){n.disabled(!r.dom.getParent(r.selection.getStart(),t));r.selection.selectorChanged(t,function(t){n.disabled(!t)})}if(r.initialized)i();else r.on("init",i)}function w(){p(this,"table")}function e(){p(this,"td,th")}function tt(){for(var n="",i,n='<table role="presentation" class="mce-grid mce-grid-border">',t=0;t<10;t++){for(n+="<tr>",i=0;i<10;i++)n+='<td><a href="#" data-mce-index="'+i+","+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center">0 x 0<\/div>'}var b,c,a=this,l;if(r.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onhide:function(){r.dom.removeClass(this.menu.items()[0].getEl().getElementsByTagName("a"),"mce-active")},menu:[{type:"container",html:tt(),onmousemove:function(n){var i,u,e=n.target;if(e.nodeName=="A"){var f=r.dom.getParent(e,"table"),t=e.getAttribute("data-mce-index"),o=n.control.parent().rel;if(t!=this.lastPos){if(t=t.split(","),t[0]=parseInt(t[0],10),t[1]=parseInt(t[1],10),n.control.isRtl()||o=="tl-tr"){for(u=9;u>=0;u--)for(i=0;i<10;i++)r.dom.toggleClass(f.rows[u].childNodes[i].firstChild,"mce-active",i>=t[0]&&u<=t[1]);t[0]=9-t[0];f.nextSibling.innerHTML=t[0]+" x "+(t[1]+1)}else{for(u=0;u<10;u++)for(i=0;i<10;i++)r.dom.toggleClass(f.rows[u].childNodes[i].firstChild,"mce-active",i<=t[0]&&u<=t[1]);f.nextSibling.innerHTML=t[0]+1+" x "+(t[1]+1)}this.lastPos=t}}},onclick:function(n){n.target.nodeName=="A"&&this.lastPos&&(n.preventDefault(),nt(this.lastPos[0]+1,this.lastPos[1]+1),this.parent().cancel())}}]}),r.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:w,onclick:y}),r.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:w,cmd:"mceTableDelete"}),r.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:u("mceTableCellProps"),onPostRender:e},{text:"Merge cells",onclick:u("mceTableMergeCells"),onPostRender:e},{text:"Split cell",onclick:u("mceTableSplitCells"),onPostRender:e}]}),r.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:u("mceTableInsertRowBefore"),onPostRender:e},{text:"Insert row after",onclick:u("mceTableInsertRowAfter"),onPostRender:e},{text:"Delete row",onclick:u("mceTableDeleteRow"),onPostRender:e},{text:"Row properties",onclick:u("mceTableRowProps"),onPostRender:e},{text:"-"},{text:"Cut row",onclick:u("mceTableCutRow"),onPostRender:e},{text:"Copy row",onclick:u("mceTableCopyRow"),onPostRender:e},{text:"Paste row before",onclick:u("mceTablePasteRowBefore"),onPostRender:e},{text:"Paste row after",onclick:u("mceTablePasteRowAfter"),onPostRender:e}]}),r.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:u("mceTableInsertColBefore"),onPostRender:e},{text:"Insert column after",onclick:u("mceTableInsertColAfter"),onPostRender:e},{text:"Delete column",onclick:u("mceTableDeleteCol"),onPostRender:e}]}),l=[],o("inserttable tableprops deletetable | cell row column".split(" "),function(n){n=="|"?l.push({text:"-"}):l.push(r.menuItems[n])}),r.addButton("table",{type:"menubutton",title:"Table",menu:l}),!f.isIE)r.on("click",function(n){n=n.target;n.nodeName==="TABLE"&&(r.selection.select(n),r.nodeChanged())});a.quirks=new t(r);r.on("Init",function(){b=r.windowManager;a.cellSelection=new i(r)});o({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(n){var i,u,t;t=r.dom.getParent(r.selection.getStart(),"th,td");t&&(i=t.rowSpan,u=t.colSpan);r.dom.select("td.mce-item-selected,th.mce-item-selected").length?n.merge():k(n,t)},mceTableInsertRowBefore:function(n){n.insertRow(!0)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(!0)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){c=n.cutRows()},mceTableCopyRow:function(n){c=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(c,!0)},mceTablePasteRowAfter:function(n){n.pasteRows(c)},mceTableDelete:function(n){n.deleteTable()}},function(t,i){r.addCommand(i,function(){var i=new n(r);i&&(t(i),r.execCommand("mceRepaint"),a.cellSelection.clear())})});o({mceInsertTable:function(){y()},mceTableRowProps:g,mceTableCellProps:d},function(n,t){r.addCommand(t,function(t,i){n(i)})})}var o=r.each;e.add("table",s)});e(["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Plugin"])})(this);
/*
//# sourceMappingURL=plugin.min.js.map
*/